<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Finance Tracker â€“ Search & Filter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 450px;
      margin: 40px auto;
      padding: 28px;
      background: linear-gradient(120deg, #f7fafc 0%, #e3eafc 100%);
      border-radius: 15px;
      box-shadow: 0 8px 24px #a9b7d0;
    }
    h2 {
      margin-top: 0;
      margin-bottom: 12px;
      color: #22336b;
      letter-spacing: 1px;
      font-size: 2rem;
      text-align: center;
    }
    form {
      background: #f2f5ff;
      border-radius: 8px;
      padding: 18px 16px 10px 16px;
      margin-bottom: 22px;
      box-shadow: 0 2px 8px #e5eaf1;
      border: 1px solid #e2e9fa;
    }
    #formError {
      color: #d8000c;
      margin-bottom: 10px;
      display: none;
      background: #ffe3e3;
      border: 1px solid #ef9a9a;
      padding: 8px;
      border-radius: 4px;
      font-size: 0.97em;
    }
    label {
      font-size: 1em;
      margin-bottom: 2px;
      color: #384063;
      display: block;
      margin-top: 5px;
    }
    #desc, #amount, select, #searchBar {
      width: 100%;
      padding: 8px;
      border: 1px solid #bfc7d3;
      border-radius: 5px;
      margin-bottom: 1rem;
      background: #fff;
    }
    button[type="submit"] {
      background: #4f8cff;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 9px 24px;
      cursor: pointer;
      font-size: 1em;
      font-weight: bold;
      transition: background 0.2s;
      letter-spacing: 0.5px;
    }
    button[type="submit"]:hover {
      background: #2368bf;
    }
    #filterPanel {
      margin-bottom: 18px;
      text-align: center;
    }
    .filter-btn {
      margin-right: 6px;
      margin-bottom: 7px;
      padding: 8px 20px;
      border: none;
      border-radius: 20px;
      background: #dbeafe;
      color: #3b436e;
      cursor: pointer;
      font-size: 1em;
      font-weight: 500;
      transition: background 0.2s;
      outline: none;
    }
    .filter-btn.active {
      background: #4f8cff;
      color: #fff;
      font-weight: bold;
      box-shadow: 0 2px 10px #bad6ff87;
    }
    ul {
      padding-left: 0;
      list-style: none;
      min-height: 60px;
      margin: 0;
    }
    li {
      background: #fff;
      margin-bottom: 0.65rem;
      padding: 0.8rem 1.1rem;
      border-radius: 8px;
      box-shadow: 0 1px 4px #b3b6bc41;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.06em;
      transition: box-shadow 0.2s;
    }
    li:last-child { margin-bottom: 0; }
    li:hover {
      box-shadow: 0 3px 16px #bac6e084;
    }
    .no-results {
      color: #888;
      text-align: center;
      font-style: italic;
      background: none;
      box-shadow: none;
      padding-left: 0;
    }
    .amount {
      font-weight: bold;
      font-size: 1.07em;
    }
    .income { color: #28b070; }
    .expense { color: #e74c3c; }
  </style>
</head>
<body>
  <h2>Finance Tracker</h2>
  <div id="formError"></div>
  <form id="addForm" autocomplete="off">
    <label for="desc">Description</label>
    <input id="desc" type="text" placeholder="Enter description">
    <label for="amount">Amount</label>
    <input id="amount" type="number" placeholder="Enter amount">
    <label for="cat">Category</label>
    <select id="cat">
      <option value="Income">Income</option>
      <option value="Expense">Expense</option>
    </select>
    <button type="submit">Add Transaction</button>
  </form>
  <input id="searchBar" type="text" placeholder="Search transactions...">
  <div id="filterPanel"></div>
  <ul id="resultsList"></ul>
  <script>
    function loadTransactions() {
      const data = localStorage.getItem("transactions");
      if (data) return JSON.parse(data);
      return [
        { id: 1, description: "Salary", category: "Income", amount: 1300 },
        { id: 2, description: "Groceries", category: "Expense", amount: -250 },
        { id: 3, description: "Book Sale", category: "Income", amount: 120 },
        { id: 4, description: "Utilities", category: "Expense", amount: -90 }
      ];
    }
    function saveTransactions() {
      localStorage.setItem("transactions", JSON.stringify(transactions));
    }
    let transactions = loadTransactions();
    const categories = ["All", "Income", "Expense"];
    const searchBar = document.getElementById("searchBar");
    const filterPanel = document.getElementById("filterPanel");
    const resultsList = document.getElementById("resultsList");
    const addForm = document.getElementById("addForm");
    const formError = document.getElementById("formError");
    let selectedCategory = "All";
    let searchQuery = "";
    function renderFilters() {
      filterPanel.innerHTML = "";
      categories.forEach(cat => {
        const btn = document.createElement("button");
        btn.textContent = cat;
        btn.className = "filter-btn" + (cat === selectedCategory ? " active" : "");
        btn.type = "button";
        btn.onclick = () => {
          selectedCategory = cat;
          renderFilters();
          renderResults();
        };
        filterPanel.appendChild(btn);
      });
    }
    function renderResults() {
      const filtered = transactions.filter(tx =>
        (selectedCategory === "All" || tx.category === selectedCategory) &&
        tx.description.toLowerCase().includes(searchQuery.toLowerCase())
      );
      resultsList.innerHTML = "";
      if (filtered.length === 0) {
        const li = document.createElement("li");
        li.textContent = "No results found.";
        li.className = "no-results";
        resultsList.appendChild(li);
      } else {
        filtered.forEach(tx => {
          const li = document.createElement("li");
          li.innerHTML = `
            <span>
              <strong>${tx.description}</strong> <em>(${tx.category})</em>
            </span>
            <span class="amount ${tx.category.toLowerCase()}">
              ${tx.amount > 0 ? "+" : ""}${tx.amount}
            </span>
          `;
          resultsList.appendChild(li);
        });
      }
    }
    searchBar.addEventListener("input", e => {
      searchQuery = e.target.value;
      renderResults();
    });
    addForm.addEventListener("submit", function(e) {
      e.preventDefault();
      formError.style.display = "none";
      const desc = document.getElementById("desc").value.trim();
      const amount = document.getElementById("amount").value.trim();
      const cat = document.getElementById("cat").value;
      if (desc === "") {
        showError("Description is required.");
        return;
      }
      if (amount === "" || isNaN(amount)) {
        showError("Amount must be a number.");
        return;
      }
      const amt = Number(amount);
      if (cat === "Expense" && amt > 0) {
        showError("Expense amount should be negative or zero.");
        return;
      }
      if (cat === "Income" && amt < 0) {
        showError("Income amount should be positive or zero.");
        return;
      }
      transactions.unshift({
        id: Date.now(),
        description: desc,
        category: cat,
        amount: amt
      });
      saveTransactions();
      addForm.reset();
      renderResults();
    });
    function showError(msg) {
      formError.textContent = msg;
      formError.style.display = "block";
    }
    renderFilters();
    renderResults();
  </script>
</body>
</html>
